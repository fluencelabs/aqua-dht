(xor
    (seq
        (seq
            (call relay ("srv" "resolve_alias") [alias] service_id)
            (call relay ("srv" "remove") [service_id])
        )
        (seq
            (call relay ("srv" "add_alias") [alias service] result)
            (call %init_peer_id% (returnService "run") [result])
        )
    )
    (call %init_peer_id% (returnService "run") [%last_error%])
)
